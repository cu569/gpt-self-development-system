const puppeteer = require("puppeteer");
const path = require("path");

(async () => {
  const upload = {
    title: "í¬ì§€ì…˜ ë’¤ëŒë¦¬ê¸° ì™„ì „ ì •ë³µ",
    description: "ì´ ì˜ìƒ í•˜ë‚˜ë¡œ í¬ì§€ì…˜ ë’¤ëŒë¦¬ê¸° ë§ˆìŠ¤í„°í•˜ì„¸ìš”.",
    videoPath: "C:/Users/ì‚¬ìš©ìì´ë¦„/Desktop/video.mp4",
    thumbnailPath: "C:/Users/ì‚¬ìš©ìì´ë¦„/Desktop/thumb.jpg",
    scheduleDate: "2025-07-18",   // ì˜ˆì•½ ë‚ ì§œ
    scheduleTime: "15:00"         // ì˜ˆì•½ ì‹œê°„ (24ì‹œê°„ì œ)
  };

  const browser = await puppeteer.launch({
    headless: false,
    defaultViewport: null,
    args: ["--start-maximized"]
  });

  const page = await browser.newPage();
  await page.goto("https://studio.youtube.com");

  console.log("ğŸ” ë¡œê·¸ì¸ í›„ ì—…ë¡œë“œ ì°½ì´ ì—´ë¦¬ë©´ ìë™ ì‹¤í–‰ë©ë‹ˆë‹¤...");
  await page.waitForSelector("input[type='file']", { timeout: 0 });

  const fileInput = await page.$("input[type='file']");
  await fileInput.uploadFile(path.resolve(upload.videoPath));

  await page.waitForSelector("textarea#title-textarea");
  await page.type("textarea#title-textarea", upload.title);
  await page.type("textarea#description-textarea", upload.description);

  const thumbInput = await page.$("input[type='file'][accept='image/*']");
  await thumbInput.uploadFile(path.resolve(upload.thumbnailPath));

  await page.click("ytcp-button[aria-label='ê³µê°œ ì˜µì…˜']");
  await page.waitForTimeout(500);
  await page.click("tp-yt-paper-item[title='ì˜ˆì•½']");
  await page.waitForTimeout(500);

  await page.type("input[aria-label='ë‚ ì§œ ì…ë ¥']", upload.scheduleDate);
  await page.type("input[aria-label='ì‹œê°„ ì…ë ¥']", upload.scheduleTime);

  await page.click("ytcp-button[id='done-button']");
  console.log("âœ… ì˜ˆì•½ ì—…ë¡œë“œ ì™„ë£Œ!");
})();
